<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LoggerUtil.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">interop-transaction-engine</a> &gt; <a href="index.source.html" class="el_package">com.comviva.interop.txnengine.util</a> &gt; <span class="el_source">LoggerUtil.java</span></div><h1>LoggerUtil.java</h1><pre class="source lang-java linenums">package com.comviva.interop.txnengine.util;


import java.io.IOException;
import java.sql.Timestamp;
import java.util.Calendar;
import java.util.Map;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.comviva.interop.txnengine.enums.LogConstants;
import com.comviva.interop.txnengine.enums.ServiceTypes;
import com.comviva.interop.txnengine.model.ConfirmTransactionRequest;
import com.comviva.interop.txnengine.model.ConfirmTransactionResponse;
import com.comviva.interop.txnengine.model.LogDetail;
import com.comviva.interop.txnengine.model.NetworkMessageRequest;
import com.comviva.interop.txnengine.model.NetworkMessageResponse;
import com.comviva.interop.txnengine.model.OrangeMoneyOperations;
import com.comviva.interop.txnengine.model.OrangeMoneyTechnicalAccounts;
import com.comviva.interop.txnengine.model.PendingTransactionRequest;
import com.comviva.interop.txnengine.model.PendingTransactionsResponse;
import com.comviva.interop.txnengine.model.QuotationRequest;
import com.comviva.interop.txnengine.model.QuotationResponse;
import com.comviva.interop.txnengine.model.ReceiveTransactionRequest;
import com.comviva.interop.txnengine.model.ReceiveTransactionResponse;
import com.comviva.interop.txnengine.model.Response;
import com.comviva.interop.txnengine.model.TransactionCorrectionResponse;
import com.comviva.interop.txnengine.model.TransactionRequest;
import com.comviva.interop.txnengine.model.TransactionResponse;
import com.comviva.interop.txnengine.model.TransactionStatusRequest;
import com.comviva.interop.txnengine.model.TransactionStatusResponse;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ObjectNode;

public class LoggerUtil {
	
<span class="fc" id="L39">	private static final Logger LOGGER = LoggerFactory.getLogger(LoggerUtil.class);</span>
	
	private LoggerUtil() {
	}
	
	
	/**
	 * @param request
	 * @param country
	 * @param interOpRefId
	 * @param eventType
	 * @param useCase
	 * @return
	 */
	public static String prepareLogDetailForTxnStatusRequest(TransactionStatusRequest request, String country, String interOpRefId, String eventType, String useCase) {
<span class="fc" id="L54">	    String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
	    try {
<span class="fc" id="L56">	        LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="fc" id="L57">	        logDetail.setLang(request.getLang());</span>
<span class="fc" id="L58">	        prepareLogDetailDynamicValues(logDetail, null, LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue(), null, null, null);</span>
<span class="fc" id="L59">            logDetail.setParameters(request.convertToJSON(request));</span>
<span class="fc" id="L60">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L61">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L62">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L63">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L64">        }</span>
<span class="fc" id="L65">	    return jsonString;</span>
	}
	
	private static LogDetail prepareRequest(String country, String interOpRefId, String eventType) {
<span class="fc" id="L69">	    LogDetail logDetail = prepareLogConstants(country, eventType);</span>
<span class="fc" id="L70">	    logDetail.setSessionId(interOpRefId);</span>
<span class="fc" id="L71">	    return logDetail;</span>
	}
	
	/**
	 * @param request
	 * @param country
	 * @param interOpRefId
	 * @param eventType
	 * @return
	 */
	public static String prepareLogDetailForCreateTxnRequest(TransactionRequest request, String country, String interOpRefId, String eventType, String useCase, int pinLength) {
<span class="fc" id="L82">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L84">            String  pin = request.getDebitPartyCredentials().getPin();</span>
<span class="fc" id="L85">            request.getDebitPartyCredentials().setPin(StringUtils.getMaskedData(pinLength, &quot;*&quot;));</span>

<span class="fc" id="L87">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="fc" id="L88">            logDetail.setParameters(request.convertToJSON(request));</span>
<span class="fc" id="L89">            logDetail.setLang(request.getLang());</span>
<span class="pc bpc" id="L90" title="1 of 4 branches missed.">            prepareLogDetailDynamicValues(logDetail, request.getCurrency(), (null!= request.getDebitParty() &amp;&amp; !request.getDebitParty().isEmpty() </span>
<span class="pc bpc" id="L91" title="1 of 4 branches missed.">                                    ?request.getDebitParty().get(0).getValue() : LogConstants.EMPTY_STRING.getValue()),(null!= request.getCreditParty() &amp;&amp; !request.getCreditParty().isEmpty() </span>
<span class="fc" id="L92">                                    ? request.getCreditParty().get(0).getValue() : LogConstants.EMPTY_STRING.getValue()),</span>
<span class="fc" id="L93">                    request.getAmount(), request.getExtOrgRefId(), request.getRequestSource());</span>
<span class="fc" id="L94">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L95">            jsonString = logDetail.convertToJSON(logDetail);</span>
<span class="fc" id="L96">            request.getDebitPartyCredentials().setPin(pin);</span>
<span class="nc" id="L97">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L98">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L99">        }</span>
<span class="fc" id="L100">        return jsonString;</span>
    }
	
	/**
	 * @param logDetail
	 * @param currency
	 * @param payerMsisdn
	 * @param payeeMsisdn
	 * @param amount
	 * @param extOrgRefId
	 * @param requestSource
	 * @return
	 */
	private static LogDetail prepareLogDetailDynamicValues(LogDetail logDetail, String currency, String payerMsisdn, String payeeMsisdn, String amount, String extOrgRefId, String requestSource) {
<span class="fc" id="L114">	    logDetail.setCurrency(currency);</span>
<span class="fc" id="L115">        logDetail.setMsisdn(payerMsisdn);</span>
<span class="fc" id="L116">        logDetail.setMsisdn1(payeeMsisdn);</span>
<span class="fc" id="L117">        logDetail.setAmount(amount);</span>
<span class="fc" id="L118">        logDetail.setRequestId(extOrgRefId);</span>
<span class="fc" id="L119">        logDetail.setPeer(requestSource);</span>
<span class="fc" id="L120">        return logDetail;</span>
	}
	
	private static LogDetail prepareLogResponse(String country, String eventType, String interOpRefId, 
	        String serviceType, String language, String extOrgRefId, String requestSource) {
<span class="fc" id="L125">	    LogDetail logDetail = prepareLogConstants(country, eventType);</span>
<span class="fc" id="L126">        logDetail.setSessionId(interOpRefId);</span>
<span class="fc" id="L127">        logDetail.setUseCase(serviceType);</span>
<span class="fc" id="L128">        logDetail.setLang(language);            </span>
<span class="fc" id="L129">        logDetail.setRequestId(extOrgRefId);</span>
<span class="fc" id="L130">        logDetail.setPeer(requestSource);</span>
<span class="fc" id="L131">        return logDetail;</span>
	}
	
	private static void setResponse(Exception exception, LogDetail logDetail, String status) {
<span class="fc bfc" id="L135" title="All 2 branches covered.">	    logDetail.setErrorDetails(exception != null ? covertStackTraceToString(exception) : &quot;&quot;);</span>
<span class="fc" id="L136">	    logDetail.setReturnedStatus(status);</span>
<span class="fc" id="L137">	}</span>
	private static LogDetail prepareLogConstants(String country, String eventType) {
<span class="fc" id="L139">	    LogDetail logDetail = new LogDetail();</span>
<span class="fc" id="L140">	    logDetail.setDateTime(getTimeStamp());</span>
<span class="fc" id="L141">        logDetail.setLevel(LogConstants.INFO.getValue());</span>
<span class="fc" id="L142">        logDetail.setCountry(country);</span>
<span class="fc" id="L143">        logDetail.setEventType(eventType);</span>
<span class="fc" id="L144">	    return logDetail;</span>
	}
	
	/**
	 * @param eventType
	 * @param exception
	 * @return
	 */
	public static String printLog(String eventType, Exception exception) {
<span class="nc" id="L153">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="nc" id="L155">            LogDetail logDetail = prepareLogConstants(LogConstants.EMPTY_STRING.getValue(), eventType);</span>
<span class="nc bnc" id="L156" title="All 2 branches missed.">            logDetail.setErrorDetails(exception != null ? covertStackTraceToString(exception) : LogConstants.EMPTY_STRING.getValue());</span>
<span class="nc" id="L157">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L158">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L159">            LOGGER.error(e.getMessage(), e);</span>
<span class="nc" id="L160">        }</span>
<span class="nc" id="L161">        return jsonString;</span>
    }
	
	public static String printLogForChannelUserByMSISDN(String eventType, Exception exception, String msisdn) {
<span class="nc" id="L165">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="nc" id="L167">            LogDetail logDetail = prepareLogConstants(LogConstants.EMPTY_STRING.getValue(), eventType);</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">            logDetail.setErrorDetails(exception != null ? covertStackTraceToString(exception) : LogConstants.EMPTY_STRING.getValue());</span>
<span class="nc" id="L169">            logDetail.setMsisdn(msisdn);</span>
<span class="nc" id="L170">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L171">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L172">            LOGGER.error(e.getMessage(), e);</span>
<span class="nc" id="L173">        }</span>
<span class="nc" id="L174">        return jsonString;</span>
    }
	
	 public static String printLog(String eventType, Exception exception, String useCase) {
<span class="fc" id="L178">	        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
	        try {
<span class="fc" id="L180">	            LogDetail logDetail = prepareLogConstants(LogConstants.EMPTY_STRING.getValue(), eventType);</span>
<span class="pc bpc" id="L181" title="1 of 2 branches missed.">	            logDetail.setErrorDetails(exception != null ? covertStackTraceToString(exception) : LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L182">	            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L183">	            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L184">	        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L185">	            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L186">	        }</span>
<span class="fc" id="L187">	        return jsonString;</span>
	    }
	 
	 public static String printLogForTxnCorrectionRequest(String eventType, Exception exception, String useCase, String transactionId, String rrn) {
<span class="fc" id="L191">	        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
	        try {
<span class="fc" id="L193">	            LogDetail logDetail = prepareLogConstants(LogConstants.EMPTY_STRING.getValue(), eventType);</span>
<span class="fc bfc" id="L194" title="All 2 branches covered.">	            if(null == transactionId) {</span>
<span class="fc" id="L195">	            	logDetail.setSessionId(rrn);	</span>
	            }
	            else {
<span class="fc" id="L198">	            	logDetail.setSessionId(transactionId);</span>
	            }
<span class="pc bpc" id="L200" title="1 of 2 branches missed.">	            logDetail.setErrorDetails(exception != null ? covertStackTraceToString(exception) : LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L201">	            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L202">	            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L203">	        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L204">	            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L205">	        }</span>
<span class="fc" id="L206">	        return jsonString;</span>
	    }
	 
	 public static String prepareLogDetailForTxnCorrectionResponse(String country, String interOpRefId, 
		        String eventType, TransactionCorrectionResponse response, Exception exception) {
<span class="fc" id="L211">	        String jsonString = &quot;&quot;;</span>
	        try {
<span class="fc" id="L213">	            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,LogConstants.TXN_CORRECTION.getValue(),</span>
	                    null, null, null);
<span class="fc" id="L215">	            setResponse(exception, logDetail, &quot;&quot;);</span>
<span class="fc" id="L216">	            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="fc" id="L217">	            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L218">	        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L219">	            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L220">	        }</span>
<span class="fc" id="L221">	        return jsonString;</span>
	    }
	
	public static String prepareLogDetailForQuotationResponse(QuotationRequest request, String country, String interOpRefId, 
	        String eventType, QuotationResponse response, Exception exception) {
<span class="fc" id="L226">        String jsonString = &quot;&quot;;</span>
        try {
<span class="fc" id="L228">            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,ServiceTypes.TRANSACTION_QUOTATION.toString(),</span>
<span class="fc" id="L229">                    request.getLang(), request.getExtOrgRefId(), request.getRequestSource());</span>
<span class="fc" id="L230">            setResponse(exception, logDetail, &quot;&quot;);</span>
<span class="fc" id="L231">            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="fc" id="L232">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L233">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L234">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L235">        }</span>
<span class="fc" id="L236">        return jsonString;</span>
    }
	
	/**
	 * @param request
	 * @param country
	 * @param interOpRefId
	 * @param eventType
	 * @param response
	 * @param exception
	 * @return
	 */
	public static String prepareLogDetailForCreateTransactionResponse(TransactionRequest request, String country, String interOpRefId, String eventType,
	        TransactionResponse response, Exception exception) {
<span class="fc" id="L250">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc bfc" id="L252" title="All 2 branches covered.">            if(null == response) {</span>
<span class="fc" id="L253">                response = new TransactionResponse();</span>
            }
<span class="fc" id="L255">            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,ServiceTypes.CREATE_TRANSACTION.toString(),</span>
<span class="fc" id="L256">                    request.getLang(), request.getExtOrgRefId(), request.getRequestSource());</span>
<span class="fc" id="L257">            setResponse(exception, logDetail,response.getStatus());</span>
<span class="fc" id="L258">            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="fc" id="L259">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L260">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L261">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L262">        }</span>
<span class="fc" id="L263">        return jsonString;</span>
    }
	
	/**
	 * @param request
	 * @param country
	 * @param interOpRefId
	 * @param eventType
	 * @param response
	 * @return
	 */
	public static String prepareLogDetailForGetLangResponse(TransactionRequest request, String country, String interOpRefId, String eventType, Response response) {
<span class="nc" id="L275">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="nc" id="L277">            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,LogConstants.GET_LANG.getValue(),</span>
<span class="nc" id="L278">                    request.getLang(), request.getExtOrgRefId(), request.getRequestSource());</span>
<span class="nc" id="L279">            setResponse(null, logDetail,LogConstants.EMPTY_STRING.getValue());</span>
<span class="nc" id="L280">            logDetail.setParameters(response.toString());</span>
<span class="nc" id="L281">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L282">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L283">            LOGGER.error(e.getMessage(), e);</span>
<span class="nc" id="L284">        }</span>
<span class="nc" id="L285">        return jsonString;</span>
    }
	
    /**
     * @param request
     * @param country
     * @param interOpRefId
     * @param eventType
     * @param response
     * @return
     */
    public static String prepareLogDetailForGetLangRequest(TransactionRequest request, String country, String interOpRefId, String eventType, String response) {
<span class="nc" id="L297">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="nc" id="L299">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="nc" id="L300">            prepareLogDetailDynamicValues(logDetail, request.getCurrency(), request.getDebitParty().get(0).getValue() , request.getCreditParty().get(0).getValue(),</span>
<span class="nc" id="L301">                    request.getAmount(), request.getExtOrgRefId(), request.getRequestSource());</span>
<span class="nc" id="L302">            logDetail.setParameters(response);        </span>
<span class="nc" id="L303">            logDetail.setLang(request.getLang());</span>
<span class="nc" id="L304">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L305">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L306">            LOGGER.error(e.getMessage(), e);</span>
<span class="nc" id="L307">        }</span>
<span class="nc" id="L308">        return jsonString;</span>
    }

    /**
     * @param eventType
     * @param countryId
     * @param from
     * @param limit
     * @return
     */
    public static String prepareLogDetailForOMOperationsRequest(String eventType, String countryId, String from, int limit) {
<span class="fc" id="L319">        LogDetail logDetail = new LogDetail();</span>
<span class="fc" id="L320">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
            
<span class="fc" id="L323">            logDetail.setDateTime(getTimeStamp());</span>
<span class="fc" id="L324">            logDetail.setLevel(LogConstants.INFO.getValue());</span>
<span class="fc" id="L325">            logDetail.setCountry(countryId);</span>
<span class="fc" id="L326">            logDetail.setEventType(eventType);</span>
<span class="fc" id="L327">            logDetail.setParameters(prepareOMOperationRequestString(countryId,from,limit));</span>
<span class="fc" id="L328">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L329">        } catch (IOException e) {</span>
<span class="nc" id="L330">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L331">        }</span>
<span class="fc" id="L332">        return jsonString;</span>
    }
    
    /**
     * @param eventType
     * @param response
     * @param countryId
     * @param exception
     * @return
     */
    public static String prepareLogDetailForOMOperationResponse(String eventType, OrangeMoneyOperations response, String countryId, Exception exception) {
<span class="fc" id="L343">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L345">            LogDetail logDetail = new LogDetail();</span>
<span class="fc" id="L346">            logDetail.setDateTime(getTimeStamp());</span>
<span class="fc" id="L347">            logDetail.setLevel(LogConstants.INFO.getValue());</span>
<span class="fc" id="L348">            logDetail.setCountry(countryId);</span>
<span class="fc" id="L349">            logDetail.setUseCase(LogConstants.OM_OPERATIONS.getValue());</span>
<span class="fc" id="L350">            logDetail.setEventType(eventType);</span>
<span class="fc" id="L351">            logDetail.setParameters(response.toString());</span>
<span class="pc bpc" id="L352" title="1 of 2 branches missed.">            logDetail.setErrorDetails(exception != null ? covertStackTraceToString(exception) : &quot;&quot;);</span>
<span class="fc" id="L353">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L354">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L355">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L356">        }</span>
<span class="fc" id="L357">        return jsonString;</span>
    }
    
    /**
     * @param eventType
     * @param countryId
     * @return
     */
    public static String prepareLogDetailForTechnicalWalletsRequest(String eventType, String countryId) {
<span class="fc" id="L366">        LogDetail logDetail = new LogDetail();</span>
<span class="fc" id="L367">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L369">            logDetail.setDateTime(getTimeStamp());</span>
<span class="fc" id="L370">            logDetail.setLevel(LogConstants.INFO.getValue());</span>
<span class="fc" id="L371">            logDetail.setCountry(countryId);</span>
<span class="fc" id="L372">            logDetail.setEventType(eventType);</span>
<span class="fc" id="L373">            ObjectMapper mapper = new ObjectMapper();</span>
<span class="fc" id="L374">            ObjectNode objectNode1 = mapper.createObjectNode();</span>
<span class="fc" id="L375">            objectNode1.put(&quot;countryId&quot;, countryId);</span>
<span class="fc" id="L376">            logDetail.setParameters(objectNode1.toString());</span>
<span class="fc" id="L377">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L378">        } catch (IOException e) {</span>
<span class="nc" id="L379">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L380">        }</span>
<span class="fc" id="L381">        return jsonString;</span>
    }
    
    /**
     * @param eventType
     * @param response
     * @param countryId
     * @param exception
     * @return
     */
    public static String prepareLogDetailForTechnicalWalletsResponse(String eventType, OrangeMoneyTechnicalAccounts response, String countryId, Exception exception) {
<span class="fc" id="L392">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L394">            LogDetail logDetail = new LogDetail();</span>
<span class="fc" id="L395">            logDetail.setDateTime(getTimeStamp());</span>
<span class="fc" id="L396">            logDetail.setLevel(LogConstants.INFO.getValue());</span>
<span class="fc" id="L397">            logDetail.setCountry(countryId);</span>
<span class="fc" id="L398">            logDetail.setUseCase(LogConstants.TECHNICAL_WALLETS.getValue());</span>
<span class="fc" id="L399">            logDetail.setEventType(eventType);</span>
<span class="fc" id="L400">            logDetail.setParameters(response.toString());</span>
<span class="pc bpc" id="L401" title="1 of 2 branches missed.">            logDetail.setErrorDetails(exception != null ? covertStackTraceToString(exception) : &quot;&quot;);</span>
<span class="fc" id="L402">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L403">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L404">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L405">        }</span>
<span class="fc" id="L406">        return jsonString;</span>
    }
    
    private static String prepareOMOperationRequestString(String countryId, String from, int limit) {
<span class="fc" id="L410">        ObjectMapper mapper = new ObjectMapper();</span>
<span class="fc" id="L411">        ObjectNode objectNode1 = mapper.createObjectNode();</span>
<span class="fc" id="L412">        objectNode1.put(&quot;countryId&quot;, countryId);</span>
<span class="fc" id="L413">        objectNode1.put(&quot;from&quot;, from);</span>
<span class="fc" id="L414">        objectNode1.put(&quot;limit&quot;, limit);</span>
<span class="fc" id="L415">        return objectNode1.toString();</span>
    }
    
    private static String prepareListOfTxnRequestString(String lang, String extOrgRefId, String startDate, String endDate,
            int offset, int limit) {
<span class="fc" id="L420">        ObjectMapper mapper = new ObjectMapper();</span>
<span class="fc" id="L421">        ObjectNode objectNode1 = mapper.createObjectNode();</span>
<span class="fc" id="L422">        objectNode1.put(&quot;lang&quot;, lang);</span>
<span class="fc" id="L423">        objectNode1.put(&quot;extOrgRefId&quot;, extOrgRefId);</span>
<span class="fc" id="L424">        objectNode1.put(&quot;startDate&quot;, startDate);</span>
<span class="fc" id="L425">        objectNode1.put(&quot;endDate&quot;, endDate);</span>
<span class="fc" id="L426">        objectNode1.put(&quot;offset&quot;, offset);</span>
<span class="fc" id="L427">        objectNode1.put(&quot;limit&quot;, limit);</span>
<span class="fc" id="L428">        return objectNode1.toString();</span>
    }
    
	private static Timestamp getTimeStamp() {
<span class="fc" id="L432">        return new Timestamp(Calendar.getInstance().getTimeInMillis());</span>
    }
    
    /**
     * @param ex -- the exception to print stacktrace
     * @return stack trace as string
     */
    public static String covertStackTraceToString(Exception ex) {
<span class="fc" id="L440">        StringBuilder result = new StringBuilder(ex.toString() + &quot;\n&quot;);</span>
<span class="fc" id="L441">        StackTraceElement[] trace = ex.getStackTrace();</span>
<span class="fc bfc" id="L442" title="All 2 branches covered.">        for (int i=0;i&lt;trace.length;i++) {</span>
<span class="fc" id="L443">            result.append(trace[i].toString() + &quot;\n&quot;);</span>
        }
<span class="fc" id="L445">        return result.toString();</span>
    }
    
    /**
     * @param eventType
     * @param msisdn
     * @param exception
     * @param message
     * @param useCase
     * @return
     */
    public static String printLogForSMS(String eventType, String msisdn, Exception exception, String message, String useCase) {
<span class="fc" id="L457">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L459">            LogDetail logDetail = prepareLogConstants(LogConstants.EMPTY_STRING.getValue(), eventType);</span>
<span class="fc" id="L460">            logDetail.setMsisdn(msisdn);</span>
<span class="fc bfc" id="L461" title="All 2 branches covered.">            logDetail.setErrorDetails(exception != null ? covertStackTraceToString(exception) : LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L462">            logDetail.setParameters(message);</span>
<span class="fc" id="L463">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L464">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L465">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L466">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L467">        }</span>
<span class="fc" id="L468">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForBrokerRequest(String country, String currency, String interOpRefId, String eventType, Map&lt;String, String&gt; request, String useCase, int length) {
<span class="fc" id="L472">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L474">            String pin = request.get(MobiquityConst.PIN.getValue());</span>
<span class="fc bfc" id="L475" title="All 2 branches covered.">            if(null != pin) {</span>
<span class="fc" id="L476">                request.put(MobiquityConst.PIN.getValue(), StringUtils.getMaskedData(length, &quot;*&quot;));    </span>
            }
<span class="fc" id="L478">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="fc" id="L479">            prepareLogDetailDynamicValues(logDetail, currency, request.get(MobiquityConst.MSISDN.getValue()) , request.get(MobiquityConst.MSISDN2.getValue()),</span>
<span class="fc" id="L480">                    request.get(MobiquityConst.AMOUNT.getValue()), null, null);</span>
<span class="fc" id="L481">            logDetail.setParameters(request.toString());</span>
<span class="fc" id="L482">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L483">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="fc bfc" id="L484" title="All 2 branches covered.">            if(null != pin) {</span>
<span class="fc" id="L485">                request.put(MobiquityConst.PIN.getValue(), pin);    </span>
            }
<span class="nc" id="L487">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L488">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L489">        }</span>
<span class="fc" id="L490">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForBrokerResponse(Map&lt;String, String&gt; request,String country, String interOpRefId, String eventType, Response response, String useCase) {
<span class="fc" id="L494">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L496">            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,useCase, null, null, null);</span>
<span class="fc" id="L497">            setResponse(null, logDetail,LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L498">            logDetail.setParameters(response.toString());</span>
<span class="fc" id="L499">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L500">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L501">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L502">        }</span>
<span class="fc" id="L503">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForHPSRequest(String msisdn, String country, 
            String interOpRefId, String eventType, String request, String lang) {
<span class="fc" id="L508">        LogDetail logDetail = new LogDetail();</span>
<span class="fc" id="L509">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L511">            logDetail.setDateTime(getTimeStamp());</span>
<span class="fc" id="L512">            logDetail.setLevel(LogConstants.INFO.getValue());</span>
<span class="fc" id="L513">            logDetail.setSessionId(interOpRefId);</span>
<span class="fc" id="L514">            logDetail.setCountry(country);</span>
<span class="fc" id="L515">            logDetail.setMsisdn(msisdn);</span>
<span class="fc" id="L516">            logDetail.setEventType(eventType);</span>
<span class="fc" id="L517">            logDetail.setLang(lang);</span>
<span class="fc" id="L518">            logDetail.setParameters(request);</span>
<span class="fc" id="L519">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L520">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L521">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L522">        }</span>
<span class="fc" id="L523">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForHPSResponse(String lang, String country, String interOpRefId, String eventType, String response, String useCase) {
<span class="fc" id="L527">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L529">            LogDetail logDetail = new LogDetail();</span>
<span class="fc" id="L530">            logDetail.setDateTime(getTimeStamp());</span>
<span class="fc" id="L531">            logDetail.setLevel(LogConstants.INFO.getValue());</span>
<span class="fc" id="L532">            logDetail.setSessionId(interOpRefId);</span>
<span class="fc" id="L533">            logDetail.setCountry(country);</span>
<span class="fc" id="L534">            logDetail.setReturnedStatus(LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L535">            logDetail.setLang(lang);</span>
<span class="fc" id="L536">            logDetail.setEventType(eventType);</span>
<span class="fc" id="L537">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L538">            logDetail.setParameters(response);</span>
<span class="fc" id="L539">            logDetail.setErrorDetails(LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L540">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L541">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L542">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L543">        }</span>
<span class="fc" id="L544">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForTxnQuotationRequest(QuotationRequest request, String country, String interOpRefId, String eventType, String useCase) {
<span class="fc" id="L548">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L550">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="fc" id="L551">            logDetail.setLang(request.getLang());</span>
<span class="pc bpc" id="L552" title="2 of 4 branches missed.">             prepareLogDetailDynamicValues(logDetail, request.getCurrency(), (null != request.getDebitParty() &amp;&amp; !request.getDebitParty().isEmpty() </span>
<span class="pc" id="L553">                        ?request.getDebitParty().get(0).getValue() : LogConstants.EMPTY_STRING.getValue()),</span>
<span class="pc bpc" id="L554" title="2 of 4 branches missed.">                        (null != request.getCreditParty() &amp;&amp; !request.getCreditParty().isEmpty()</span>
<span class="pc" id="L555">                        ? request.getCreditParty().get(0).getValue() : LogConstants.EMPTY_STRING.getValue()),</span>
<span class="fc" id="L556">                        request.getAmount(), request.getExtOrgRefId(), request.getRequestSource());</span>
<span class="fc" id="L557">            logDetail.setParameters(request.convertToJSON(request));</span>
<span class="fc" id="L558">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L559">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L560">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L561">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L562">        }</span>
<span class="fc" id="L563">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForTxnStatusResponse(TransactionStatusRequest request, String country, String interOpRefId, 
            String eventType, TransactionStatusResponse response, Exception exception) {
<span class="fc" id="L568">        String jsonString = &quot;&quot;;</span>
        try {
<span class="fc" id="L570">            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,ServiceTypes.GET_TRANSACTION_STATUS.toString(),</span>
<span class="fc" id="L571">                    request.getLang(), null, null);</span>
<span class="fc" id="L572">            setResponse(exception, logDetail, &quot;&quot;);</span>
<span class="fc" id="L573">            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="fc" id="L574">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L575">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L576">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L577">        }</span>
<span class="fc" id="L578">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForListOfTxnStatusRequest(String country, String interOpRefId, String eventType, String useCase,String lang, String extOrgRefId, String startDate, String endDate,
            Integer offset, Integer limit) {
<span class="fc" id="L583">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L585">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="fc" id="L586">            logDetail.setLang(lang);</span>
<span class="fc" id="L587">             prepareLogDetailDynamicValues(logDetail, null, LogConstants.EMPTY_STRING.getValue(),</span>
<span class="fc" id="L588">                        LogConstants.EMPTY_STRING.getValue(),</span>
                        null, extOrgRefId, null);
<span class="fc" id="L590">            logDetail.setParameters(prepareListOfTxnRequestString(lang, extOrgRefId, startDate, endDate, offset, limit));</span>
<span class="fc" id="L591">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L592">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L593">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L594">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L595">        }</span>
<span class="fc" id="L596">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForListOfTxnStatusResponse(
            String eventType, TransactionStatusResponse response, Exception exception) {
<span class="fc" id="L601">        String jsonString = &quot;&quot;;</span>
        try {
<span class="fc" id="L603">            LogDetail logDetail =  prepareLogResponse(null, eventType, null,ServiceTypes.GET_TRANSACTIONS.toString(),</span>
                    null, null, null);
<span class="fc" id="L605">            setResponse(exception, logDetail, &quot;&quot;);</span>
<span class="fc" id="L606">            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="fc" id="L607">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L608">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L609">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L610">        }</span>
<span class="fc" id="L611">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForReceiveTxnRequest(ReceiveTransactionRequest request, String country, String interOpRefId, String eventType, String useCase) {
<span class="fc" id="L615">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L617">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="fc" id="L618">            logDetail.setParameters(request.convertToJSON(request));</span>
<span class="fc" id="L619">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L620">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L621">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L622">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L623">        }</span>
<span class="fc" id="L624">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForReceiveTxnResponse(String country, String interOpRefId, 
            String eventType, ReceiveTransactionResponse response, Exception exception) {
<span class="fc" id="L629">        String jsonString = &quot;&quot;;</span>
        try {
<span class="fc" id="L631">            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,ServiceTypes.RECEIVE_TRANSACTION.toString(),</span>
                    null, null, null);
<span class="fc" id="L633">            setResponse(exception, logDetail, &quot;&quot;);</span>
<span class="fc" id="L634">            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="fc" id="L635">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L636">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L637">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L638">        }</span>
<span class="fc" id="L639">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForPendingTxnRequest(PendingTransactionRequest request, String country, String interOpRefId, String eventType, String useCase) {
<span class="fc" id="L643">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L645">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="fc" id="L646">            logDetail.setLang(request.getLang());</span>
<span class="fc" id="L647">             prepareLogDetailDynamicValues(logDetail, LogConstants.EMPTY_STRING.getValue(), request.getMsisdn(), LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L648">             logDetail.setLang(request.getLang());</span>
<span class="fc" id="L649">            logDetail.setParameters(request.convertToJSON(request));</span>
<span class="fc" id="L650">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L651">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L652">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L653">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L654">        }</span>
<span class="fc" id="L655">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForPendingTransactionsResponse(PendingTransactionRequest request, String country, String interOpRefId, String eventType,
	        PendingTransactionsResponse response, Exception exception) {
<span class="fc" id="L660">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="pc bpc" id="L662" title="1 of 2 branches missed.">            if(null == response) {</span>
<span class="nc" id="L663">                response = new PendingTransactionsResponse();</span>
            }
<span class="fc" id="L665">            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,ServiceTypes.PENDING_TRANSACTIONS.toString(),</span>
<span class="fc" id="L666">                    request.getLang(), LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L667">            setResponse(exception, logDetail,LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L668">            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="fc" id="L669">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L670">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L671">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L672">        }</span>
<span class="fc" id="L673">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForConfirmTxnRequest(ConfirmTransactionRequest request, String country, String interOpRefId, String eventType, String useCase) {
<span class="fc" id="L677">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="fc" id="L679">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="fc" id="L680">            logDetail.setLang(request.getLang());</span>
<span class="fc" id="L681">             prepareLogDetailDynamicValues(logDetail, LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue(), </span>
<span class="fc" id="L682">            		 LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L683">             logDetail.setLang(request.getLang());</span>
<span class="fc" id="L684">            logDetail.setParameters(request.convertToJSON(request));</span>
<span class="fc" id="L685">            logDetail.setUseCase(useCase);</span>
<span class="fc" id="L686">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L687">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L688">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L689">        }</span>
<span class="fc" id="L690">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForConfirmTxnResponse(ConfirmTransactionRequest request, String country, String interOpRefId, String eventType,
	        ConfirmTransactionResponse response, Exception exception) {
<span class="fc" id="L695">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="pc bpc" id="L697" title="1 of 2 branches missed.">            if(null == response) {</span>
<span class="nc" id="L698">                response = new ConfirmTransactionResponse();</span>
            }
<span class="fc" id="L700">            LogDetail logDetail =  prepareLogResponse(country, eventType, interOpRefId,ServiceTypes.ACTION_ON_TRANSACTION_CONFIRMATION.toString(),</span>
<span class="fc" id="L701">                    request.getLang(), LogConstants.EMPTY_STRING.getValue(), LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L702">            setResponse(exception, logDetail,LogConstants.EMPTY_STRING.getValue());</span>
<span class="fc" id="L703">            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="fc" id="L704">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L705">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L706">            LOGGER.error(e.getMessage(), e);</span>
<span class="fc" id="L707">        }</span>
<span class="fc" id="L708">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForNetworkMessageRequest(NetworkMessageRequest networkMessageRequest, String country, String interOpRefId, String eventType) {
<span class="nc" id="L712">        String jsonString = LogConstants.EMPTY_STRING.getValue();</span>
        try {
<span class="nc" id="L714">            LogDetail logDetail = prepareRequest(country, interOpRefId, eventType);</span>
<span class="nc" id="L715">            logDetail.setParameters(networkMessageRequest.convertToJSON(networkMessageRequest));</span>
<span class="nc" id="L716">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L717">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L718">            LOGGER.error(e.getMessage(), e);</span>
<span class="nc" id="L719">        }</span>
<span class="nc" id="L720">        return jsonString;</span>
    }
    
    public static String prepareLogDetailForNetworkMessageResponse(String language,String country, String userId, 
            String eventType, NetworkMessageResponse response, Exception exception) {
<span class="nc" id="L725">        String jsonString = &quot;&quot;;</span>
        try {
<span class="nc" id="L727">            LogDetail logDetail =  prepareLogResponse(country, eventType, userId,ServiceTypes.NETWORK_MESSAGE.toString(),</span>
            		language, null, null);
<span class="nc" id="L729">            setResponse(exception, logDetail, &quot;&quot;);</span>
<span class="nc" id="L730">            logDetail.setParameters(response.convertToJSON(response));</span>
<span class="nc" id="L731">            jsonString = logDetail.convertToJSON(logDetail); </span>
<span class="nc" id="L732">        } catch (JsonProcessingException e) {</span>
<span class="nc" id="L733">            LOGGER.error(e.getMessage(), e);</span>
<span class="nc" id="L734">        }</span>
<span class="nc" id="L735">        return jsonString;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>